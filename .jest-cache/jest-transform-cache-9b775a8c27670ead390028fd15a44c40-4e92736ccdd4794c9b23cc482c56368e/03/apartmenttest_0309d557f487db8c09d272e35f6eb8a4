7a8e242450b51892f3d8640a0204510b
const request = require('supertest');
const mongoose = require('mongoose');
const {
  MongoMemoryServer
} = require('mongodb-memory-server');
const app = require('../app');
const Apartment = require('../models/apartment.model');
const User = require('../models/user.model');
const jwt = require('jsonwebtoken');
const NodeCache = require('node-cache');
let mongoServer;
let adminToken;
let agentToken;
let userToken;
let adminUser;
let agentUser;
let regularUser;
let cache;

// Helper function to create test apartment data
const createTestApartment = (isPublic = true) => ({
  title: `${isPublic ? 'Public' : 'Private'} Apartment`,
  description: `A ${isPublic ? 'public' : 'private'} listing`,
  price: isPublic ? 1000 : 2000,
  location: {
    coordinates: [0, 0],
    address: {
      street: isPublic ? '123 Main St' : '456 Main St',
      city: 'Test City',
      state: 'TS',
      zipCode: '12345',
      country: 'Test Country'
    }
  },
  bedrooms: isPublic ? 2 : 3,
  bathrooms: isPublic ? 1 : 2,
  area: isPublic ? 1000 : 1500,
  isPublic,
  externalUrl: `https://example.com/${isPublic ? 'public' : 'private'}`
});
beforeAll(async () => {
  try {
    mongoServer = await MongoMemoryServer.create();
    await mongoose.connect(mongoServer.getUri());
    cache = new NodeCache();

    // Create test users
    adminUser = await User.create({
      name: 'Admin User',
      email: 'admin@test.com',
      password: 'password123',
      role: 'admin'
    });
    agentUser = await User.create({
      name: 'Agent User',
      email: 'agent@test.com',
      password: 'password123',
      role: 'agent'
    });
    regularUser = await User.create({
      name: 'Regular User',
      email: 'user@test.com',
      password: 'password123',
      role: 'user'
    });

    // Generate tokens
    adminToken = jwt.sign({
      id: adminUser._id
    }, process.env.JWT_SECRET);
    agentToken = jwt.sign({
      id: agentUser._id
    }, process.env.JWT_SECRET);
    userToken = jwt.sign({
      id: regularUser._id
    }, process.env.JWT_SECRET);
  } catch (error) {
    console.error('Error in beforeAll:', error);
    throw error;
  }
});
afterAll(async () => {
  try {
    // Clean up all test data
    await Promise.all([User.deleteMany({}), Apartment.deleteMany({})]);

    // Close cache
    if (cache) {
      cache.close();
    }

    // Disconnect from MongoDB
    await mongoose.disconnect();

    // Stop MongoDB memory server
    if (mongoServer) {
      await mongoServer.stop();
    }
  } catch (error) {
    console.error('Error in afterAll:', error);
    throw error;
  }
});
beforeEach(async () => {
  try {
    // Clear the cache before each test
    if (cache) {
      cache.flushAll();
    }
    // Clear apartments before each test
    await Apartment.deleteMany({});
  } catch (error) {
    console.error('Error in beforeEach:', error);
    throw error;
  }
});
describe('Apartment Access Control', () => {
  test('should create public and private listings', async () => {
    const publicListing = createTestApartment(true);
    const privateListing = createTestApartment(false);

    // Create listings as admin
    const [publicResponse, privateResponse] = await Promise.all([request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(publicListing), request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(privateListing)]);
    expect(publicResponse.status).toBe(201);
    expect(privateResponse.status).toBe(201);
    expect(publicResponse.body.isPublic).toBe(true);
    expect(privateResponse.body.isPublic).toBe(false);
  });
  test('should only show public listings to regular users', async () => {
    const publicListing = createTestApartment(true);
    const privateListing = createTestApartment(false);

    // Create listings as admin
    await Promise.all([request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(publicListing), request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(privateListing)]);

    // Regular user should only see public listing
    const response = await request(app).get('/api/apartments').set('Authorization', `Bearer ${userToken}`);
    expect(response.status).toBe(200);
    expect(response.body.apartments).toHaveLength(1);
    expect(response.body.apartments[0].isPublic).toBe(true);
  });
  test('should show all listings to admin and their own private listings to agents', async () => {
    const publicListing = createTestApartment(true);
    const privateListing = createTestApartment(false);
    const agentPrivateListing = {
      ...createTestApartment(false),
      title: 'Agent Private Apartment',
      description: 'A private listing by agent',
      price: 3000
    };

    // Create listings as admin
    await Promise.all([request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(publicListing), request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(privateListing)]);

    // Create private listing as agent
    await request(app).post('/api/apartments').set('Authorization', `Bearer ${agentToken}`).send(agentPrivateListing);

    // Admin should see all listings
    const adminResponse = await request(app).get('/api/apartments').set('Authorization', `Bearer ${adminToken}`);
    expect(adminResponse.status).toBe(200);
    expect(adminResponse.body.apartments).toHaveLength(3);

    // Agent should see public listings and their own private listing
    const agentResponse = await request(app).get('/api/apartments').set('Authorization', `Bearer ${agentToken}`);
    expect(agentResponse.status).toBe(200);
    expect(agentResponse.body.apartments).toHaveLength(2);
    expect(agentResponse.body.apartments.some(apt => apt.title === 'Agent Private Apartment')).toBe(true);
  });
  test('should only allow admins to change isPublic status', async () => {
    // Create a listing as agent
    const listing = {
      title: 'Test Apartment',
      description: 'A test listing',
      price: 1000,
      location: {
        type: 'Point',
        coordinates: [0, 0],
        address: {
          street: '123 Main St',
          city: 'Test City',
          state: 'TS',
          zipCode: '12345',
          country: 'Test Country'
        }
      },
      bedrooms: 2,
      bathrooms: 1,
      area: 1000,
      isPublic: true
    };
    const createResponse = await request(app).post('/api/apartments').set('Authorization', `Bearer ${agentToken}`).send(listing);
    const apartmentId = createResponse.body._id;

    // Agent should not be able to change isPublic status
    const agentResponse = await request(app).put(`/api/apartments/${apartmentId}`).set('Authorization', `Bearer ${agentToken}`).send({
      ...listing,
      isPublic: false
    });
    expect(agentResponse.status).toBe(403);
    expect(agentResponse.body.error).toBe('Only admins can change the public status of listings');

    // Admin should be able to change isPublic status
    const adminResponse = await request(app).put(`/api/apartments/${apartmentId}`).set('Authorization', `Bearer ${adminToken}`).send({
      ...listing,
      isPublic: false
    });
    expect(adminResponse.status).toBe(200);
    expect(adminResponse.body.isPublic).toBe(false);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiTW9uZ29NZW1vcnlTZXJ2ZXIiLCJhcHAiLCJBcGFydG1lbnQiLCJVc2VyIiwiand0IiwiTm9kZUNhY2hlIiwibW9uZ29TZXJ2ZXIiLCJhZG1pblRva2VuIiwiYWdlbnRUb2tlbiIsInVzZXJUb2tlbiIsImFkbWluVXNlciIsImFnZW50VXNlciIsInJlZ3VsYXJVc2VyIiwiY2FjaGUiLCJjcmVhdGVUZXN0QXBhcnRtZW50IiwiaXNQdWJsaWMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJsb2NhdGlvbiIsImNvb3JkaW5hdGVzIiwiYWRkcmVzcyIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5IiwiYmVkcm9vbXMiLCJiYXRocm9vbXMiLCJhcmVhIiwiZXh0ZXJuYWxVcmwiLCJiZWZvcmVBbGwiLCJjcmVhdGUiLCJjb25uZWN0IiwiZ2V0VXJpIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJyb2xlIiwic2lnbiIsImlkIiwiX2lkIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJlcnJvciIsImNvbnNvbGUiLCJhZnRlckFsbCIsIlByb21pc2UiLCJhbGwiLCJkZWxldGVNYW55IiwiY2xvc2UiLCJkaXNjb25uZWN0Iiwic3RvcCIsImJlZm9yZUVhY2giLCJmbHVzaEFsbCIsImRlc2NyaWJlIiwidGVzdCIsInB1YmxpY0xpc3RpbmciLCJwcml2YXRlTGlzdGluZyIsInB1YmxpY1Jlc3BvbnNlIiwicHJpdmF0ZVJlc3BvbnNlIiwicG9zdCIsInNldCIsInNlbmQiLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwiYm9keSIsInJlc3BvbnNlIiwiZ2V0IiwiYXBhcnRtZW50cyIsInRvSGF2ZUxlbmd0aCIsImFnZW50UHJpdmF0ZUxpc3RpbmciLCJhZG1pblJlc3BvbnNlIiwiYWdlbnRSZXNwb25zZSIsInNvbWUiLCJhcHQiLCJsaXN0aW5nIiwidHlwZSIsImNyZWF0ZVJlc3BvbnNlIiwiYXBhcnRtZW50SWQiLCJwdXQiXSwic291cmNlcyI6WyJhcGFydG1lbnQudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5jb25zdCB7IE1vbmdvTWVtb3J5U2VydmVyIH0gPSByZXF1aXJlKCdtb25nb2RiLW1lbW9yeS1zZXJ2ZXInKTtcbmNvbnN0IGFwcCA9IHJlcXVpcmUoJy4uL2FwcCcpO1xuY29uc3QgQXBhcnRtZW50ID0gcmVxdWlyZSgnLi4vbW9kZWxzL2FwYXJ0bWVudC5tb2RlbCcpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy91c2VyLm1vZGVsJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IE5vZGVDYWNoZSA9IHJlcXVpcmUoJ25vZGUtY2FjaGUnKTtcblxubGV0IG1vbmdvU2VydmVyO1xubGV0IGFkbWluVG9rZW47XG5sZXQgYWdlbnRUb2tlbjtcbmxldCB1c2VyVG9rZW47XG5sZXQgYWRtaW5Vc2VyO1xubGV0IGFnZW50VXNlcjtcbmxldCByZWd1bGFyVXNlcjtcbmxldCBjYWNoZTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0ZXN0IGFwYXJ0bWVudCBkYXRhXG5jb25zdCBjcmVhdGVUZXN0QXBhcnRtZW50ID0gKGlzUHVibGljID0gdHJ1ZSkgPT4gKHtcbiAgdGl0bGU6IGAke2lzUHVibGljID8gJ1B1YmxpYycgOiAnUHJpdmF0ZSd9IEFwYXJ0bWVudGAsXG4gIGRlc2NyaXB0aW9uOiBgQSAke2lzUHVibGljID8gJ3B1YmxpYycgOiAncHJpdmF0ZSd9IGxpc3RpbmdgLFxuICBwcmljZTogaXNQdWJsaWMgPyAxMDAwIDogMjAwMCxcbiAgbG9jYXRpb246IHtcbiAgICBjb29yZGluYXRlczogWzAsIDBdLFxuICAgIGFkZHJlc3M6IHtcbiAgICAgIHN0cmVldDogaXNQdWJsaWMgPyAnMTIzIE1haW4gU3QnIDogJzQ1NiBNYWluIFN0JyxcbiAgICAgIGNpdHk6ICdUZXN0IENpdHknLFxuICAgICAgc3RhdGU6ICdUUycsXG4gICAgICB6aXBDb2RlOiAnMTIzNDUnLFxuICAgICAgY291bnRyeTogJ1Rlc3QgQ291bnRyeScsXG4gICAgfSxcbiAgfSxcbiAgYmVkcm9vbXM6IGlzUHVibGljID8gMiA6IDMsXG4gIGJhdGhyb29tczogaXNQdWJsaWMgPyAxIDogMixcbiAgYXJlYTogaXNQdWJsaWMgPyAxMDAwIDogMTUwMCxcbiAgaXNQdWJsaWMsXG4gIGV4dGVybmFsVXJsOiBgaHR0cHM6Ly9leGFtcGxlLmNvbS8ke2lzUHVibGljID8gJ3B1YmxpYycgOiAncHJpdmF0ZSd9YCxcbn0pO1xuXG5iZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIG1vbmdvU2VydmVyID0gYXdhaXQgTW9uZ29NZW1vcnlTZXJ2ZXIuY3JlYXRlKCk7XG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChtb25nb1NlcnZlci5nZXRVcmkoKSk7XG4gICAgY2FjaGUgPSBuZXcgTm9kZUNhY2hlKCk7XG5cbiAgICAvLyBDcmVhdGUgdGVzdCB1c2Vyc1xuICAgIGFkbWluVXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgIG5hbWU6ICdBZG1pbiBVc2VyJyxcbiAgICAgIGVtYWlsOiAnYWRtaW5AdGVzdC5jb20nLFxuICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsXG4gICAgICByb2xlOiAnYWRtaW4nLFxuICAgIH0pO1xuXG4gICAgYWdlbnRVc2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgICAgbmFtZTogJ0FnZW50IFVzZXInLFxuICAgICAgZW1haWw6ICdhZ2VudEB0ZXN0LmNvbScsXG4gICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkMTIzJyxcbiAgICAgIHJvbGU6ICdhZ2VudCcsXG4gICAgfSk7XG5cbiAgICByZWd1bGFyVXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgIG5hbWU6ICdSZWd1bGFyIFVzZXInLFxuICAgICAgZW1haWw6ICd1c2VyQHRlc3QuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnLFxuICAgICAgcm9sZTogJ3VzZXInLFxuICAgIH0pO1xuXG4gICAgLy8gR2VuZXJhdGUgdG9rZW5zXG4gICAgYWRtaW5Ub2tlbiA9IGp3dC5zaWduKHsgaWQ6IGFkbWluVXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG4gICAgYWdlbnRUb2tlbiA9IGp3dC5zaWduKHsgaWQ6IGFnZW50VXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG4gICAgdXNlclRva2VuID0gand0LnNpZ24oeyBpZDogcmVndWxhclVzZXIuX2lkIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGJlZm9yZUFsbDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn0pO1xuXG5hZnRlckFsbChhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2xlYW4gdXAgYWxsIHRlc3QgZGF0YVxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtVc2VyLmRlbGV0ZU1hbnkoe30pLCBBcGFydG1lbnQuZGVsZXRlTWFueSh7fSldKTtcblxuICAgIC8vIENsb3NlIGNhY2hlXG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICBjYWNoZS5jbG9zZSgpO1xuICAgIH1cblxuICAgIC8vIERpc2Nvbm5lY3QgZnJvbSBNb25nb0RCXG4gICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xuXG4gICAgLy8gU3RvcCBNb25nb0RCIG1lbW9yeSBzZXJ2ZXJcbiAgICBpZiAobW9uZ29TZXJ2ZXIpIHtcbiAgICAgIGF3YWl0IG1vbmdvU2VydmVyLnN0b3AoKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYWZ0ZXJBbGw6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59KTtcblxuYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2xlYXIgdGhlIGNhY2hlIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgIGNhY2hlLmZsdXNoQWxsKCk7XG4gICAgfVxuICAgIC8vIENsZWFyIGFwYXJ0bWVudHMgYmVmb3JlIGVhY2ggdGVzdFxuICAgIGF3YWl0IEFwYXJ0bWVudC5kZWxldGVNYW55KHt9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBiZWZvcmVFYWNoOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufSk7XG5cbmRlc2NyaWJlKCdBcGFydG1lbnQgQWNjZXNzIENvbnRyb2wnLCAoKSA9PiB7XG4gIHRlc3QoJ3Nob3VsZCBjcmVhdGUgcHVibGljIGFuZCBwcml2YXRlIGxpc3RpbmdzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHB1YmxpY0xpc3RpbmcgPSBjcmVhdGVUZXN0QXBhcnRtZW50KHRydWUpO1xuICAgIGNvbnN0IHByaXZhdGVMaXN0aW5nID0gY3JlYXRlVGVzdEFwYXJ0bWVudChmYWxzZSk7XG5cbiAgICAvLyBDcmVhdGUgbGlzdGluZ3MgYXMgYWRtaW5cbiAgICBjb25zdCBbcHVibGljUmVzcG9uc2UsIHByaXZhdGVSZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXBhcnRtZW50cycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgICAuc2VuZChwdWJsaWNMaXN0aW5nKSxcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZG1pblRva2VufWApXG4gICAgICAgIC5zZW5kKHByaXZhdGVMaXN0aW5nKSxcbiAgICBdKTtcblxuICAgIGV4cGVjdChwdWJsaWNSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICBleHBlY3QocHJpdmF0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgIGV4cGVjdChwdWJsaWNSZXNwb25zZS5ib2R5LmlzUHVibGljKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChwcml2YXRlUmVzcG9uc2UuYm9keS5pc1B1YmxpYykudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBvbmx5IHNob3cgcHVibGljIGxpc3RpbmdzIHRvIHJlZ3VsYXIgdXNlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcHVibGljTGlzdGluZyA9IGNyZWF0ZVRlc3RBcGFydG1lbnQodHJ1ZSk7XG4gICAgY29uc3QgcHJpdmF0ZUxpc3RpbmcgPSBjcmVhdGVUZXN0QXBhcnRtZW50KGZhbHNlKTtcblxuICAgIC8vIENyZWF0ZSBsaXN0aW5ncyBhcyBhZG1pblxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZG1pblRva2VufWApXG4gICAgICAgIC5zZW5kKHB1YmxpY0xpc3RpbmcpLFxuICAgICAgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2FkbWluVG9rZW59YClcbiAgICAgICAgLnNlbmQocHJpdmF0ZUxpc3RpbmcpLFxuICAgIF0pO1xuXG4gICAgLy8gUmVndWxhciB1c2VyIHNob3VsZCBvbmx5IHNlZSBwdWJsaWMgbGlzdGluZ1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAuZ2V0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt1c2VyVG9rZW59YCk7XG5cbiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuYXBhcnRtZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmFwYXJ0bWVudHNbMF0uaXNQdWJsaWMpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBzaG93IGFsbCBsaXN0aW5ncyB0byBhZG1pbiBhbmQgdGhlaXIgb3duIHByaXZhdGUgbGlzdGluZ3MgdG8gYWdlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHB1YmxpY0xpc3RpbmcgPSBjcmVhdGVUZXN0QXBhcnRtZW50KHRydWUpO1xuICAgIGNvbnN0IHByaXZhdGVMaXN0aW5nID0gY3JlYXRlVGVzdEFwYXJ0bWVudChmYWxzZSk7XG4gICAgY29uc3QgYWdlbnRQcml2YXRlTGlzdGluZyA9IHtcbiAgICAgIC4uLmNyZWF0ZVRlc3RBcGFydG1lbnQoZmFsc2UpLFxuICAgICAgdGl0bGU6ICdBZ2VudCBQcml2YXRlIEFwYXJ0bWVudCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0EgcHJpdmF0ZSBsaXN0aW5nIGJ5IGFnZW50JyxcbiAgICAgIHByaWNlOiAzMDAwLFxuICAgIH07XG5cbiAgICAvLyBDcmVhdGUgbGlzdGluZ3MgYXMgYWRtaW5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXBhcnRtZW50cycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgICAuc2VuZChwdWJsaWNMaXN0aW5nKSxcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZG1pblRva2VufWApXG4gICAgICAgIC5zZW5kKHByaXZhdGVMaXN0aW5nKSxcbiAgICBdKTtcblxuICAgIC8vIENyZWF0ZSBwcml2YXRlIGxpc3RpbmcgYXMgYWdlbnRcbiAgICBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5wb3N0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZ2VudFRva2VufWApXG4gICAgICAuc2VuZChhZ2VudFByaXZhdGVMaXN0aW5nKTtcblxuICAgIC8vIEFkbWluIHNob3VsZCBzZWUgYWxsIGxpc3RpbmdzXG4gICAgY29uc3QgYWRtaW5SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgLmdldCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKTtcblxuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLmJvZHkuYXBhcnRtZW50cykudG9IYXZlTGVuZ3RoKDMpO1xuXG4gICAgLy8gQWdlbnQgc2hvdWxkIHNlZSBwdWJsaWMgbGlzdGluZ3MgYW5kIHRoZWlyIG93biBwcml2YXRlIGxpc3RpbmdcbiAgICBjb25zdCBhZ2VudFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAuZ2V0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZ2VudFRva2VufWApO1xuXG4gICAgZXhwZWN0KGFnZW50UmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgZXhwZWN0KGFnZW50UmVzcG9uc2UuYm9keS5hcGFydG1lbnRzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgZXhwZWN0KFxuICAgICAgYWdlbnRSZXNwb25zZS5ib2R5LmFwYXJ0bWVudHMuc29tZSgoYXB0KSA9PiBhcHQudGl0bGUgPT09ICdBZ2VudCBQcml2YXRlIEFwYXJ0bWVudCcpXG4gICAgKS50b0JlKHRydWUpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgb25seSBhbGxvdyBhZG1pbnMgdG8gY2hhbmdlIGlzUHVibGljIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAvLyBDcmVhdGUgYSBsaXN0aW5nIGFzIGFnZW50XG4gICAgY29uc3QgbGlzdGluZyA9IHtcbiAgICAgIHRpdGxlOiAnVGVzdCBBcGFydG1lbnQnLFxuICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3QgbGlzdGluZycsXG4gICAgICBwcmljZTogMTAwMCxcbiAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBbMCwgMF0sXG4gICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgICAgY2l0eTogJ1Rlc3QgQ2l0eScsXG4gICAgICAgICAgc3RhdGU6ICdUUycsXG4gICAgICAgICAgemlwQ29kZTogJzEyMzQ1JyxcbiAgICAgICAgICBjb3VudHJ5OiAnVGVzdCBDb3VudHJ5JyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBiZWRyb29tczogMixcbiAgICAgIGJhdGhyb29tczogMSxcbiAgICAgIGFyZWE6IDEwMDAsXG4gICAgICBpc1B1YmxpYzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlYXRlUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5wb3N0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZ2VudFRva2VufWApXG4gICAgICAuc2VuZChsaXN0aW5nKTtcblxuICAgIGNvbnN0IGFwYXJ0bWVudElkID0gY3JlYXRlUmVzcG9uc2UuYm9keS5faWQ7XG5cbiAgICAvLyBBZ2VudCBzaG91bGQgbm90IGJlIGFibGUgdG8gY2hhbmdlIGlzUHVibGljIHN0YXR1c1xuICAgIGNvbnN0IGFnZW50UmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5wdXQoYC9hcGkvYXBhcnRtZW50cy8ke2FwYXJ0bWVudElkfWApXG4gICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2FnZW50VG9rZW59YClcbiAgICAgIC5zZW5kKHtcbiAgICAgICAgLi4ubGlzdGluZyxcbiAgICAgICAgaXNQdWJsaWM6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICBleHBlY3QoYWdlbnRSZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAzKTtcbiAgICBleHBlY3QoYWdlbnRSZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdPbmx5IGFkbWlucyBjYW4gY2hhbmdlIHRoZSBwdWJsaWMgc3RhdHVzIG9mIGxpc3RpbmdzJyk7XG5cbiAgICAvLyBBZG1pbiBzaG91bGQgYmUgYWJsZSB0byBjaGFuZ2UgaXNQdWJsaWMgc3RhdHVzXG4gICAgY29uc3QgYWRtaW5SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgLnB1dChgL2FwaS9hcGFydG1lbnRzLyR7YXBhcnRtZW50SWR9YClcbiAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgLnNlbmQoe1xuICAgICAgICAuLi5saXN0aW5nLFxuICAgICAgICBpc1B1YmxpYzogZmFsc2UsXG4gICAgICB9KTtcblxuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLmJvZHkuaXNQdWJsaWMpLnRvQmUoZmFsc2UpO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFX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