7a5265e5a72811ef79050b4c396fd2ea
const request = require('supertest');
const mongoose = require('mongoose');
const {
  MongoMemoryServer
} = require('mongodb-memory-server');
const app = require('../app');
const Apartment = require('../models/apartment.model');
const User = require('../models/user.model');
const jwt = require('jsonwebtoken');
const NodeCache = require('node-cache');
let mongoServer;
let adminToken;
let agentToken;
let userToken;
let adminUser;
let agentUser;
let regularUser;
let cache;

// Helper function to create test apartment data
const createTestApartment = (isPublic = true) => ({
  title: `${isPublic ? 'Public' : 'Private'} Apartment`,
  description: `A ${isPublic ? 'public' : 'private'} listing`,
  price: isPublic ? 1000 : 2000,
  location: {
    coordinates: [0, 0],
    address: {
      street: isPublic ? '123 Main St' : '456 Main St',
      city: 'Test City',
      state: 'TS',
      zipCode: '12345',
      country: 'Test Country'
    }
  },
  bedrooms: isPublic ? 2 : 3,
  bathrooms: isPublic ? 1 : 2,
  area: isPublic ? 1000 : 1500,
  isPublic,
  externalUrl: `https://example.com/${isPublic ? 'public' : 'private'}`
});
beforeAll(async () => {
  try {
    mongoServer = await MongoMemoryServer.create();
    await mongoose.connect(mongoServer.getUri());
    cache = new NodeCache();

    // Create test users
    adminUser = await User.create({
      name: 'Admin User',
      email: 'admin@test.com',
      password: 'password123',
      role: 'admin'
    });
    agentUser = await User.create({
      name: 'Agent User',
      email: 'agent@test.com',
      password: 'password123',
      role: 'agent'
    });
    regularUser = await User.create({
      name: 'Regular User',
      email: 'user@test.com',
      password: 'password123',
      role: 'user'
    });

    // Generate tokens
    adminToken = jwt.sign({
      id: adminUser._id
    }, process.env.JWT_SECRET);
    agentToken = jwt.sign({
      id: agentUser._id
    }, process.env.JWT_SECRET);
    userToken = jwt.sign({
      id: regularUser._id
    }, process.env.JWT_SECRET);
  } catch (error) {
    console.error('Error in beforeAll:', error);
    throw error;
  }
});
afterAll(async () => {
  try {
    // Clean up all test data
    await Promise.all([User.deleteMany({}), Apartment.deleteMany({})]);

    // Close cache
    if (cache) {
      cache.close();
      cache = null;
    }

    // Disconnect from MongoDB
    if (mongoose.connection.readyState !== 0) {
      await mongoose.disconnect();
    }

    // Stop MongoDB memory server
    if (mongoServer) {
      await mongoServer.stop();
      mongoServer = null;
    }
  } catch (error) {
    console.error('Error in afterAll:', error);
    throw error;
  }
});
beforeEach(async () => {
  try {
    // Clear the cache before each test
    if (cache) {
      cache.flushAll();
    }
    // Clear apartments before each test
    await Apartment.deleteMany({});
  } catch (error) {
    console.error('Error in beforeEach:', error);
    throw error;
  }
});
describe('Apartment Access Control', () => {
  test('should create public and private listings', async () => {
    const publicListing = createTestApartment(true);
    const privateListing = createTestApartment(false);

    // Create listings as admin
    const [publicResponse, privateResponse] = await Promise.all([request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(publicListing), request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(privateListing)]);
    expect(publicResponse.status).toBe(201);
    expect(privateResponse.status).toBe(201);
    expect(publicResponse.body.isPublic).toBe(true);
    expect(privateResponse.body.isPublic).toBe(false);
  });
  test('should only show public listings to regular users', async () => {
    const publicListing = createTestApartment(true);
    const privateListing = createTestApartment(false);

    // Create listings as admin
    await Promise.all([request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(publicListing), request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(privateListing)]);

    // Regular user should only see public listing
    const response = await request(app).get('/api/apartments').set('Authorization', `Bearer ${userToken}`);
    expect(response.status).toBe(200);
    expect(response.body.apartments).toHaveLength(1);
    expect(response.body.apartments[0].isPublic).toBe(true);
  });
  test('should show all listings to admin and their own private listings to agents', async () => {
    const publicListing = createTestApartment(true);
    const privateListing = createTestApartment(false);
    const agentPrivateListing = {
      ...createTestApartment(false),
      title: 'Agent Private Apartment',
      description: 'A private listing by agent',
      price: 3000
    };

    // Create listings as admin
    await Promise.all([request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(publicListing), request(app).post('/api/apartments').set('Authorization', `Bearer ${adminToken}`).send(privateListing)]);

    // Create private listing as agent
    await request(app).post('/api/apartments').set('Authorization', `Bearer ${agentToken}`).send(agentPrivateListing);

    // Admin should see all listings
    const adminResponse = await request(app).get('/api/apartments').set('Authorization', `Bearer ${adminToken}`);
    expect(adminResponse.status).toBe(200);
    expect(adminResponse.body.apartments).toHaveLength(3);

    // Agent should see public listings and their own private listing
    const agentResponse = await request(app).get('/api/apartments').set('Authorization', `Bearer ${agentToken}`);
    expect(agentResponse.status).toBe(200);
    expect(agentResponse.body.apartments).toHaveLength(2);
    expect(agentResponse.body.apartments.some(apt => apt.title === 'Agent Private Apartment')).toBe(true);
  });
  test('should only allow admins to change isPublic status', async () => {
    // Create a listing as agent
    const listing = {
      title: 'Test Apartment',
      description: 'A test listing',
      price: 1000,
      location: {
        type: 'Point',
        coordinates: [0, 0],
        address: {
          street: '123 Main St',
          city: 'Test City',
          state: 'TS',
          zipCode: '12345',
          country: 'Test Country'
        }
      },
      bedrooms: 2,
      bathrooms: 1,
      area: 1000,
      isPublic: true
    };
    const createResponse = await request(app).post('/api/apartments').set('Authorization', `Bearer ${agentToken}`).send(listing);
    const apartmentId = createResponse.body._id;

    // Agent should not be able to change isPublic status
    const agentResponse = await request(app).put(`/api/apartments/${apartmentId}`).set('Authorization', `Bearer ${agentToken}`).send({
      ...listing,
      isPublic: false
    });
    expect(agentResponse.status).toBe(403);
    expect(agentResponse.body.error).toBe('Only admins can change the public status of listings');

    // Admin should be able to change isPublic status
    const adminResponse = await request(app).put(`/api/apartments/${apartmentId}`).set('Authorization', `Bearer ${adminToken}`).send({
      ...listing,
      isPublic: false
    });
    expect(adminResponse.status).toBe(200);
    expect(adminResponse.body.isPublic).toBe(false);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiTW9uZ29NZW1vcnlTZXJ2ZXIiLCJhcHAiLCJBcGFydG1lbnQiLCJVc2VyIiwiand0IiwiTm9kZUNhY2hlIiwibW9uZ29TZXJ2ZXIiLCJhZG1pblRva2VuIiwiYWdlbnRUb2tlbiIsInVzZXJUb2tlbiIsImFkbWluVXNlciIsImFnZW50VXNlciIsInJlZ3VsYXJVc2VyIiwiY2FjaGUiLCJjcmVhdGVUZXN0QXBhcnRtZW50IiwiaXNQdWJsaWMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJsb2NhdGlvbiIsImNvb3JkaW5hdGVzIiwiYWRkcmVzcyIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5IiwiYmVkcm9vbXMiLCJiYXRocm9vbXMiLCJhcmVhIiwiZXh0ZXJuYWxVcmwiLCJiZWZvcmVBbGwiLCJjcmVhdGUiLCJjb25uZWN0IiwiZ2V0VXJpIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJyb2xlIiwic2lnbiIsImlkIiwiX2lkIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJlcnJvciIsImNvbnNvbGUiLCJhZnRlckFsbCIsIlByb21pc2UiLCJhbGwiLCJkZWxldGVNYW55IiwiY2xvc2UiLCJjb25uZWN0aW9uIiwicmVhZHlTdGF0ZSIsImRpc2Nvbm5lY3QiLCJzdG9wIiwiYmVmb3JlRWFjaCIsImZsdXNoQWxsIiwiZGVzY3JpYmUiLCJ0ZXN0IiwicHVibGljTGlzdGluZyIsInByaXZhdGVMaXN0aW5nIiwicHVibGljUmVzcG9uc2UiLCJwcml2YXRlUmVzcG9uc2UiLCJwb3N0Iiwic2V0Iiwic2VuZCIsImV4cGVjdCIsInN0YXR1cyIsInRvQmUiLCJib2R5IiwicmVzcG9uc2UiLCJnZXQiLCJhcGFydG1lbnRzIiwidG9IYXZlTGVuZ3RoIiwiYWdlbnRQcml2YXRlTGlzdGluZyIsImFkbWluUmVzcG9uc2UiLCJhZ2VudFJlc3BvbnNlIiwic29tZSIsImFwdCIsImxpc3RpbmciLCJ0eXBlIiwiY3JlYXRlUmVzcG9uc2UiLCJhcGFydG1lbnRJZCIsInB1dCJdLCJzb3VyY2VzIjpbImFwYXJ0bWVudC50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHsgTW9uZ29NZW1vcnlTZXJ2ZXIgfSA9IHJlcXVpcmUoJ21vbmdvZGItbWVtb3J5LXNlcnZlcicpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vYXBwJyk7XG5jb25zdCBBcGFydG1lbnQgPSByZXF1aXJlKCcuLi9tb2RlbHMvYXBhcnRtZW50Lm1vZGVsJyk7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL3VzZXIubW9kZWwnKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xuY29uc3QgTm9kZUNhY2hlID0gcmVxdWlyZSgnbm9kZS1jYWNoZScpO1xuXG5sZXQgbW9uZ29TZXJ2ZXI7XG5sZXQgYWRtaW5Ub2tlbjtcbmxldCBhZ2VudFRva2VuO1xubGV0IHVzZXJUb2tlbjtcbmxldCBhZG1pblVzZXI7XG5sZXQgYWdlbnRVc2VyO1xubGV0IHJlZ3VsYXJVc2VyO1xubGV0IGNhY2hlO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIHRlc3QgYXBhcnRtZW50IGRhdGFcbmNvbnN0IGNyZWF0ZVRlc3RBcGFydG1lbnQgPSAoaXNQdWJsaWMgPSB0cnVlKSA9PiAoe1xuICB0aXRsZTogYCR7aXNQdWJsaWMgPyAnUHVibGljJyA6ICdQcml2YXRlJ30gQXBhcnRtZW50YCxcbiAgZGVzY3JpcHRpb246IGBBICR7aXNQdWJsaWMgPyAncHVibGljJyA6ICdwcml2YXRlJ30gbGlzdGluZ2AsXG4gIHByaWNlOiBpc1B1YmxpYyA/IDEwMDAgOiAyMDAwLFxuICBsb2NhdGlvbjoge1xuICAgIGNvb3JkaW5hdGVzOiBbMCwgMF0sXG4gICAgYWRkcmVzczoge1xuICAgICAgc3RyZWV0OiBpc1B1YmxpYyA/ICcxMjMgTWFpbiBTdCcgOiAnNDU2IE1haW4gU3QnLFxuICAgICAgY2l0eTogJ1Rlc3QgQ2l0eScsXG4gICAgICBzdGF0ZTogJ1RTJyxcbiAgICAgIHppcENvZGU6ICcxMjM0NScsXG4gICAgICBjb3VudHJ5OiAnVGVzdCBDb3VudHJ5JyxcbiAgICB9LFxuICB9LFxuICBiZWRyb29tczogaXNQdWJsaWMgPyAyIDogMyxcbiAgYmF0aHJvb21zOiBpc1B1YmxpYyA/IDEgOiAyLFxuICBhcmVhOiBpc1B1YmxpYyA/IDEwMDAgOiAxNTAwLFxuICBpc1B1YmxpYyxcbiAgZXh0ZXJuYWxVcmw6IGBodHRwczovL2V4YW1wbGUuY29tLyR7aXNQdWJsaWMgPyAncHVibGljJyA6ICdwcml2YXRlJ31gLFxufSk7XG5cbmJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgbW9uZ29TZXJ2ZXIgPSBhd2FpdCBNb25nb01lbW9yeVNlcnZlci5jcmVhdGUoKTtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KG1vbmdvU2VydmVyLmdldFVyaSgpKTtcbiAgICBjYWNoZSA9IG5ldyBOb2RlQ2FjaGUoKTtcblxuICAgIC8vIENyZWF0ZSB0ZXN0IHVzZXJzXG4gICAgYWRtaW5Vc2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgICAgbmFtZTogJ0FkbWluIFVzZXInLFxuICAgICAgZW1haWw6ICdhZG1pbkB0ZXN0LmNvbScsXG4gICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkMTIzJyxcbiAgICAgIHJvbGU6ICdhZG1pbicsXG4gICAgfSk7XG5cbiAgICBhZ2VudFVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICBuYW1lOiAnQWdlbnQgVXNlcicsXG4gICAgICBlbWFpbDogJ2FnZW50QHRlc3QuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnLFxuICAgICAgcm9sZTogJ2FnZW50JyxcbiAgICB9KTtcblxuICAgIHJlZ3VsYXJVc2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgICAgbmFtZTogJ1JlZ3VsYXIgVXNlcicsXG4gICAgICBlbWFpbDogJ3VzZXJAdGVzdC5jb20nLFxuICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsXG4gICAgICByb2xlOiAndXNlcicsXG4gICAgfSk7XG5cbiAgICAvLyBHZW5lcmF0ZSB0b2tlbnNcbiAgICBhZG1pblRva2VuID0gand0LnNpZ24oeyBpZDogYWRtaW5Vc2VyLl9pZCB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcbiAgICBhZ2VudFRva2VuID0gand0LnNpZ24oeyBpZDogYWdlbnRVc2VyLl9pZCB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcbiAgICB1c2VyVG9rZW4gPSBqd3Quc2lnbih7IGlkOiByZWd1bGFyVXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYmVmb3JlQWxsOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufSk7XG5cbmFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBDbGVhbiB1cCBhbGwgdGVzdCBkYXRhXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1VzZXIuZGVsZXRlTWFueSh7fSksIEFwYXJ0bWVudC5kZWxldGVNYW55KHt9KV0pO1xuXG4gICAgLy8gQ2xvc2UgY2FjaGVcbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgIGNhY2hlLmNsb3NlKCk7XG4gICAgICBjYWNoZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gRGlzY29ubmVjdCBmcm9tIE1vbmdvREJcbiAgICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlICE9PSAwKSB7XG4gICAgICBhd2FpdCBtb25nb29zZS5kaXNjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgLy8gU3RvcCBNb25nb0RCIG1lbW9yeSBzZXJ2ZXJcbiAgICBpZiAobW9uZ29TZXJ2ZXIpIHtcbiAgICAgIGF3YWl0IG1vbmdvU2VydmVyLnN0b3AoKTtcbiAgICAgIG1vbmdvU2VydmVyID0gbnVsbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYWZ0ZXJBbGw6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59KTtcblxuYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2xlYXIgdGhlIGNhY2hlIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBpZiAoY2FjaGUpIHtcbiAgICAgIGNhY2hlLmZsdXNoQWxsKCk7XG4gICAgfVxuICAgIC8vIENsZWFyIGFwYXJ0bWVudHMgYmVmb3JlIGVhY2ggdGVzdFxuICAgIGF3YWl0IEFwYXJ0bWVudC5kZWxldGVNYW55KHt9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBiZWZvcmVFYWNoOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufSk7XG5cbmRlc2NyaWJlKCdBcGFydG1lbnQgQWNjZXNzIENvbnRyb2wnLCAoKSA9PiB7XG4gIHRlc3QoJ3Nob3VsZCBjcmVhdGUgcHVibGljIGFuZCBwcml2YXRlIGxpc3RpbmdzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHB1YmxpY0xpc3RpbmcgPSBjcmVhdGVUZXN0QXBhcnRtZW50KHRydWUpO1xuICAgIGNvbnN0IHByaXZhdGVMaXN0aW5nID0gY3JlYXRlVGVzdEFwYXJ0bWVudChmYWxzZSk7XG5cbiAgICAvLyBDcmVhdGUgbGlzdGluZ3MgYXMgYWRtaW5cbiAgICBjb25zdCBbcHVibGljUmVzcG9uc2UsIHByaXZhdGVSZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXBhcnRtZW50cycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgICAuc2VuZChwdWJsaWNMaXN0aW5nKSxcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZG1pblRva2VufWApXG4gICAgICAgIC5zZW5kKHByaXZhdGVMaXN0aW5nKSxcbiAgICBdKTtcblxuICAgIGV4cGVjdChwdWJsaWNSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICBleHBlY3QocHJpdmF0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgIGV4cGVjdChwdWJsaWNSZXNwb25zZS5ib2R5LmlzUHVibGljKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChwcml2YXRlUmVzcG9uc2UuYm9keS5pc1B1YmxpYykudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBvbmx5IHNob3cgcHVibGljIGxpc3RpbmdzIHRvIHJlZ3VsYXIgdXNlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcHVibGljTGlzdGluZyA9IGNyZWF0ZVRlc3RBcGFydG1lbnQodHJ1ZSk7XG4gICAgY29uc3QgcHJpdmF0ZUxpc3RpbmcgPSBjcmVhdGVUZXN0QXBhcnRtZW50KGZhbHNlKTtcblxuICAgIC8vIENyZWF0ZSBsaXN0aW5ncyBhcyBhZG1pblxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZG1pblRva2VufWApXG4gICAgICAgIC5zZW5kKHB1YmxpY0xpc3RpbmcpLFxuICAgICAgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2FkbWluVG9rZW59YClcbiAgICAgICAgLnNlbmQocHJpdmF0ZUxpc3RpbmcpLFxuICAgIF0pO1xuXG4gICAgLy8gUmVndWxhciB1c2VyIHNob3VsZCBvbmx5IHNlZSBwdWJsaWMgbGlzdGluZ1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAuZ2V0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt1c2VyVG9rZW59YCk7XG5cbiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuYXBhcnRtZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmFwYXJ0bWVudHNbMF0uaXNQdWJsaWMpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBzaG93IGFsbCBsaXN0aW5ncyB0byBhZG1pbiBhbmQgdGhlaXIgb3duIHByaXZhdGUgbGlzdGluZ3MgdG8gYWdlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHB1YmxpY0xpc3RpbmcgPSBjcmVhdGVUZXN0QXBhcnRtZW50KHRydWUpO1xuICAgIGNvbnN0IHByaXZhdGVMaXN0aW5nID0gY3JlYXRlVGVzdEFwYXJ0bWVudChmYWxzZSk7XG4gICAgY29uc3QgYWdlbnRQcml2YXRlTGlzdGluZyA9IHtcbiAgICAgIC4uLmNyZWF0ZVRlc3RBcGFydG1lbnQoZmFsc2UpLFxuICAgICAgdGl0bGU6ICdBZ2VudCBQcml2YXRlIEFwYXJ0bWVudCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0EgcHJpdmF0ZSBsaXN0aW5nIGJ5IGFnZW50JyxcbiAgICAgIHByaWNlOiAzMDAwLFxuICAgIH07XG5cbiAgICAvLyBDcmVhdGUgbGlzdGluZ3MgYXMgYWRtaW5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXBhcnRtZW50cycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgICAuc2VuZChwdWJsaWNMaXN0aW5nKSxcbiAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZG1pblRva2VufWApXG4gICAgICAgIC5zZW5kKHByaXZhdGVMaXN0aW5nKSxcbiAgICBdKTtcblxuICAgIC8vIENyZWF0ZSBwcml2YXRlIGxpc3RpbmcgYXMgYWdlbnRcbiAgICBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5wb3N0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZ2VudFRva2VufWApXG4gICAgICAuc2VuZChhZ2VudFByaXZhdGVMaXN0aW5nKTtcblxuICAgIC8vIEFkbWluIHNob3VsZCBzZWUgYWxsIGxpc3RpbmdzXG4gICAgY29uc3QgYWRtaW5SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgLmdldCgnL2FwaS9hcGFydG1lbnRzJylcbiAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKTtcblxuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLmJvZHkuYXBhcnRtZW50cykudG9IYXZlTGVuZ3RoKDMpO1xuXG4gICAgLy8gQWdlbnQgc2hvdWxkIHNlZSBwdWJsaWMgbGlzdGluZ3MgYW5kIHRoZWlyIG93biBwcml2YXRlIGxpc3RpbmdcbiAgICBjb25zdCBhZ2VudFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAuZ2V0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZ2VudFRva2VufWApO1xuXG4gICAgZXhwZWN0KGFnZW50UmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgZXhwZWN0KGFnZW50UmVzcG9uc2UuYm9keS5hcGFydG1lbnRzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgZXhwZWN0KFxuICAgICAgYWdlbnRSZXNwb25zZS5ib2R5LmFwYXJ0bWVudHMuc29tZSgoYXB0KSA9PiBhcHQudGl0bGUgPT09ICdBZ2VudCBQcml2YXRlIEFwYXJ0bWVudCcpXG4gICAgKS50b0JlKHRydWUpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgb25seSBhbGxvdyBhZG1pbnMgdG8gY2hhbmdlIGlzUHVibGljIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAvLyBDcmVhdGUgYSBsaXN0aW5nIGFzIGFnZW50XG4gICAgY29uc3QgbGlzdGluZyA9IHtcbiAgICAgIHRpdGxlOiAnVGVzdCBBcGFydG1lbnQnLFxuICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3QgbGlzdGluZycsXG4gICAgICBwcmljZTogMTAwMCxcbiAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBbMCwgMF0sXG4gICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgICAgY2l0eTogJ1Rlc3QgQ2l0eScsXG4gICAgICAgICAgc3RhdGU6ICdUUycsXG4gICAgICAgICAgemlwQ29kZTogJzEyMzQ1JyxcbiAgICAgICAgICBjb3VudHJ5OiAnVGVzdCBDb3VudHJ5JyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBiZWRyb29tczogMixcbiAgICAgIGJhdGhyb29tczogMSxcbiAgICAgIGFyZWE6IDEwMDAsXG4gICAgICBpc1B1YmxpYzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlYXRlUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5wb3N0KCcvYXBpL2FwYXJ0bWVudHMnKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZ2VudFRva2VufWApXG4gICAgICAuc2VuZChsaXN0aW5nKTtcblxuICAgIGNvbnN0IGFwYXJ0bWVudElkID0gY3JlYXRlUmVzcG9uc2UuYm9keS5faWQ7XG5cbiAgICAvLyBBZ2VudCBzaG91bGQgbm90IGJlIGFibGUgdG8gY2hhbmdlIGlzUHVibGljIHN0YXR1c1xuICAgIGNvbnN0IGFnZW50UmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5wdXQoYC9hcGkvYXBhcnRtZW50cy8ke2FwYXJ0bWVudElkfWApXG4gICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2FnZW50VG9rZW59YClcbiAgICAgIC5zZW5kKHtcbiAgICAgICAgLi4ubGlzdGluZyxcbiAgICAgICAgaXNQdWJsaWM6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICBleHBlY3QoYWdlbnRSZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAzKTtcbiAgICBleHBlY3QoYWdlbnRSZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdPbmx5IGFkbWlucyBjYW4gY2hhbmdlIHRoZSBwdWJsaWMgc3RhdHVzIG9mIGxpc3RpbmdzJyk7XG5cbiAgICAvLyBBZG1pbiBzaG91bGQgYmUgYWJsZSB0byBjaGFuZ2UgaXNQdWJsaWMgc3RhdHVzXG4gICAgY29uc3QgYWRtaW5SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgLnB1dChgL2FwaS9hcGFydG1lbnRzLyR7YXBhcnRtZW50SWR9YClcbiAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgLnNlbmQoe1xuICAgICAgICAuLi5saXN0aW5nLFxuICAgICAgICBpc1B1YmxpYzogZmFsc2UsXG4gICAgICB9KTtcblxuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChhZG1pblJlc3BvbnNlLmJvZHkuaXNQdWJsaWMpLnRvQmUoZmFsc2UpO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU07RUFBRUU7QUFBa0IsQ0FBQyxHQUFHRixPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDOUQsTUFBTUcsR0FBRyxHQUFHSCxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQzdCLE1BQU1JLFNBQVMsR0FBR0osT0FBTyxDQUFDLDJCQUEyQixDQUFDO0FBQ3RELE1BQU1LLElBQUksR0FBR0wsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQzVDLE1BQU1NLEdBQUcsR0FBR04sT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNTyxTQUFTLEdBQUdQLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFFdkMsSUFBSVEsV0FBVztBQUNmLElBQUlDLFVBQVU7QUFDZCxJQUFJQyxVQUFVO0FBQ2QsSUFBSUMsU0FBUztBQUNiLElBQUlDLFNBQVM7QUFDYixJQUFJQyxTQUFTO0FBQ2IsSUFBSUMsV0FBVztBQUNmLElBQUlDLEtBQUs7O0FBRVQ7QUFDQSxNQUFNQyxtQkFBbUIsR0FBR0EsQ0FBQ0MsUUFBUSxHQUFHLElBQUksTUFBTTtFQUNoREMsS0FBSyxFQUFFLEdBQUdELFFBQVEsR0FBRyxRQUFRLEdBQUcsU0FBUyxZQUFZO0VBQ3JERSxXQUFXLEVBQUUsS0FBS0YsUUFBUSxHQUFHLFFBQVEsR0FBRyxTQUFTLFVBQVU7RUFDM0RHLEtBQUssRUFBRUgsUUFBUSxHQUFHLElBQUksR0FBRyxJQUFJO0VBQzdCSSxRQUFRLEVBQUU7SUFDUkMsV0FBVyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNuQkMsT0FBTyxFQUFFO01BQ1BDLE1BQU0sRUFBRVAsUUFBUSxHQUFHLGFBQWEsR0FB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