03bdebbb71ef3b8aefd5b0ce377aff2e
const User = require('../models/user.model');
const Apartment = require('../models/apartment.model');

// @desc    Get user profile
// @route   GET /api/users/profile
// @access  Private
const getProfile = async (req, res, next) => {
  try {
    const user = await User.findById(req.user._id).select('-password');
    res.json(user);
  } catch (error) {
    next(error);
  }
};

// @desc    Update user profile
// @route   PUT /api/users/profile
// @access  Private
const updateProfile = async (req, res, next) => {
  try {
    const {
      name,
      email,
      phone,
      bio,
      profileImage
    } = req.body;

    // Build update object
    const updateFields = {};
    if (name) updateFields.name = name;
    if (email) updateFields.email = email;
    if (phone) updateFields.phone = phone;
    if (bio) updateFields.bio = bio;
    if (profileImage) updateFields.profileImage = profileImage;
    const user = await User.findByIdAndUpdate(req.user._id, updateFields, {
      new: true,
      runValidators: true
    }).select('-password');
    res.json(user);
  } catch (error) {
    next(error);
  }
};

// @desc    Delete user profile
// @route   DELETE /api/users/profile
// @access  Private
const deleteProfile = async (req, res, next) => {
  try {
    await User.findByIdAndDelete(req.user._id);
    res.json({
      message: 'User deleted successfully'
    });
  } catch (error) {
    next(error);
  }
};

// @desc    Update user preferences
// @route   PUT /api/users/preferences
// @access  Private
const updatePreferences = async (req, res, next) => {
  try {
    const user = await User.findByIdAndUpdate(req.user._id, {
      preferences: req.body
    }, {
      new: true,
      runValidators: true
    }).select('-password');
    res.json(user);
  } catch (error) {
    next(error);
  }
};

// @desc    Get saved searches
// @route   GET /api/users/searches
// @access  Private
const getSavedSearches = async (req, res, next) => {
  try {
    const user = await User.findById(req.user._id).select('savedSearches');
    res.json(user.savedSearches);
  } catch (error) {
    next(error);
  }
};

// @desc    Save search
// @route   POST /api/users/searches
// @access  Private
const saveSearch = async (req, res, next) => {
  try {
    const user = await User.findByIdAndUpdate(req.user._id, {
      $push: {
        savedSearches: req.body
      }
    }, {
      new: true,
      runValidators: true
    }).select('savedSearches');
    res.json(user.savedSearches);
  } catch (error) {
    next(error);
  }
};

// @desc    Delete saved search
// @route   DELETE /api/users/searches/:id
// @access  Private
const deleteSavedSearch = async (req, res, next) => {
  try {
    const user = await User.findByIdAndUpdate(req.user._id, {
      $pull: {
        savedSearches: {
          _id: req.params.id
        }
      }
    }, {
      new: true
    }).select('savedSearches');
    res.json(user.savedSearches);
  } catch (error) {
    next(error);
  }
};

// @desc    Get favorite apartments
// @route   GET /api/users/favorites
// @access  Private
const getFavoriteApartments = async (req, res, next) => {
  try {
    const user = await User.findById(req.user._id).populate({
      path: 'apartmentNotes.apartment',
      select: 'title price location bedrooms bathrooms area amenities images'
    });
    res.json(user.apartmentNotes);
  } catch (error) {
    next(error);
  }
};

// @desc    Get apartment notes
// @route   GET /api/users/apartments/:id/notes
// @access  Private
const getApartmentNotes = async (req, res, next) => {
  try {
    const user = await User.findById(req.user._id);
    const apartmentNotes = user.apartmentNotes.find(note => note.apartment.toString() === req.params.id);
    if (!apartmentNotes) {
      return res.json({
        notes: []
      });
    }
    res.json(apartmentNotes.notes);
  } catch (error) {
    next(error);
  }
};

// @desc    Add apartment note
// @route   POST /api/users/apartments/:id/notes
// @access  Private
const addApartmentNote = async (req, res, next) => {
  try {
    const apartment = await Apartment.findById(req.params.id);
    if (!apartment) {
      return res.status(404).json({
        error: 'Apartment not found'
      });
    }
    const user = await User.findById(req.user._id);
    const apartmentNotes = user.apartmentNotes.find(note => note.apartment.toString() === req.params.id);
    if (apartmentNotes) {
      apartmentNotes.notes.push({
        content: req.body.content
      });
    } else {
      user.apartmentNotes.push({
        apartment: req.params.id,
        notes: [{
          content: req.body.content
        }]
      });
    }
    await user.save();
    res.json(user.apartmentNotes);
  } catch (error) {
    next(error);
  }
};

// @desc    Update apartment note
// @route   PUT /api/users/apartments/:id/notes/:noteId
// @access  Private
const updateApartmentNote = async (req, res, next) => {
  try {
    const user = await User.findById(req.user._id);
    const apartmentNotes = user.apartmentNotes.find(note => note.apartment.toString() === req.params.id);
    if (!apartmentNotes) {
      return res.status(404).json({
        error: 'Apartment notes not found'
      });
    }
    const note = apartmentNotes.notes.id(req.params.noteId);
    if (!note) {
      return res.status(404).json({
        error: 'Note not found'
      });
    }
    note.content = req.body.content;
    note.updatedAt = Date.now();
    await user.save();
    res.json(apartmentNotes.notes);
  } catch (error) {
    next(error);
  }
};

// @desc    Delete apartment note
// @route   DELETE /api/users/apartments/:id/notes/:noteId
// @access  Private
const deleteApartmentNote = async (req, res, next) => {
  try {
    const user = await User.findById(req.user._id);
    const apartmentNotes = user.apartmentNotes.find(note => note.apartment.toString() === req.params.id);
    if (!apartmentNotes) {
      return res.status(404).json({
        error: 'Apartment notes not found'
      });
    }
    apartmentNotes.notes = apartmentNotes.notes.filter(note => note._id.toString() !== req.params.noteId);
    await user.save();
    res.json(apartmentNotes.notes);
  } catch (error) {
    next(error);
  }
};
module.exports = {
  getProfile,
  updateProfile,
  deleteProfile,
  updatePreferences,
  getSavedSearches,
  saveSearch,
  deleteSavedSearch,
  getFavoriteApartments,
  getApartmentNotes,
  addApartmentNote,
  updateApartmentNote,
  deleteApartmentNote
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsIkFwYXJ0bWVudCIsImdldFByb2ZpbGUiLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlciIsImZpbmRCeUlkIiwiX2lkIiwic2VsZWN0IiwianNvbiIsImVycm9yIiwidXBkYXRlUHJvZmlsZSIsIm5hbWUiLCJlbWFpbCIsInBob25lIiwiYmlvIiwicHJvZmlsZUltYWdlIiwiYm9keSIsInVwZGF0ZUZpZWxkcyIsImZpbmRCeUlkQW5kVXBkYXRlIiwibmV3IiwicnVuVmFsaWRhdG9ycyIsImRlbGV0ZVByb2ZpbGUiLCJmaW5kQnlJZEFuZERlbGV0ZSIsIm1lc3NhZ2UiLCJ1cGRhdGVQcmVmZXJlbmNlcyIsInByZWZlcmVuY2VzIiwiZ2V0U2F2ZWRTZWFyY2hlcyIsInNhdmVkU2VhcmNoZXMiLCJzYXZlU2VhcmNoIiwiJHB1c2giLCJkZWxldGVTYXZlZFNlYXJjaCIsIiRwdWxsIiwicGFyYW1zIiwiaWQiLCJnZXRGYXZvcml0ZUFwYXJ0bWVudHMiLCJwb3B1bGF0ZSIsInBhdGgiLCJhcGFydG1lbnROb3RlcyIsImdldEFwYXJ0bWVudE5vdGVzIiwiZmluZCIsIm5vdGUiLCJhcGFydG1lbnQiLCJ0b1N0cmluZyIsIm5vdGVzIiwiYWRkQXBhcnRtZW50Tm90ZSIsInN0YXR1cyIsInB1c2giLCJjb250ZW50Iiwic2F2ZSIsInVwZGF0ZUFwYXJ0bWVudE5vdGUiLCJub3RlSWQiLCJ1cGRhdGVkQXQiLCJEYXRlIiwibm93IiwiZGVsZXRlQXBhcnRtZW50Tm90ZSIsImZpbHRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VyLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy91c2VyLm1vZGVsJyk7XHJcbmNvbnN0IEFwYXJ0bWVudCA9IHJlcXVpcmUoJy4uL21vZGVscy9hcGFydG1lbnQubW9kZWwnKTtcclxuXHJcbi8vIEBkZXNjICAgIEdldCB1c2VyIHByb2ZpbGVcclxuLy8gQHJvdXRlICAgR0VUIC9hcGkvdXNlcnMvcHJvZmlsZVxyXG4vLyBAYWNjZXNzICBQcml2YXRlXHJcbmNvbnN0IGdldFByb2ZpbGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuX2lkKS5zZWxlY3QoJy1wYXNzd29yZCcpO1xyXG4gICAgcmVzLmpzb24odXNlcik7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEBkZXNjICAgIFVwZGF0ZSB1c2VyIHByb2ZpbGVcclxuLy8gQHJvdXRlICAgUFVUIC9hcGkvdXNlcnMvcHJvZmlsZVxyXG4vLyBAYWNjZXNzICBQcml2YXRlXHJcbmNvbnN0IHVwZGF0ZVByb2ZpbGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBuYW1lLCBlbWFpbCwgcGhvbmUsIGJpbywgcHJvZmlsZUltYWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBCdWlsZCB1cGRhdGUgb2JqZWN0XHJcbiAgICBjb25zdCB1cGRhdGVGaWVsZHMgPSB7fTtcclxuICAgIGlmIChuYW1lKSB1cGRhdGVGaWVsZHMubmFtZSA9IG5hbWU7XHJcbiAgICBpZiAoZW1haWwpIHVwZGF0ZUZpZWxkcy5lbWFpbCA9IGVtYWlsO1xyXG4gICAgaWYgKHBob25lKSB1cGRhdGVGaWVsZHMucGhvbmUgPSBwaG9uZTtcclxuICAgIGlmIChiaW8pIHVwZGF0ZUZpZWxkcy5iaW8gPSBiaW87XHJcbiAgICBpZiAocHJvZmlsZUltYWdlKSB1cGRhdGVGaWVsZHMucHJvZmlsZUltYWdlID0gcHJvZmlsZUltYWdlO1xyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS51c2VyLl9pZCwgdXBkYXRlRmllbGRzLCB7XHJcbiAgICAgIG5ldzogdHJ1ZSxcclxuICAgICAgcnVuVmFsaWRhdG9yczogdHJ1ZSxcclxuICAgIH0pLnNlbGVjdCgnLXBhc3N3b3JkJyk7XHJcblxyXG4gICAgcmVzLmpzb24odXNlcik7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEBkZXNjICAgIERlbGV0ZSB1c2VyIHByb2ZpbGVcclxuLy8gQHJvdXRlICAgREVMRVRFIC9hcGkvdXNlcnMvcHJvZmlsZVxyXG4vLyBAYWNjZXNzICBQcml2YXRlXHJcbmNvbnN0IGRlbGV0ZVByb2ZpbGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZERlbGV0ZShyZXEudXNlci5faWQpO1xyXG4gICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnVXNlciBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEBkZXNjICAgIFVwZGF0ZSB1c2VyIHByZWZlcmVuY2VzXHJcbi8vIEByb3V0ZSAgIFBVVCAvYXBpL3VzZXJzL3ByZWZlcmVuY2VzXHJcbi8vIEBhY2Nlc3MgIFByaXZhdGVcclxuY29uc3QgdXBkYXRlUHJlZmVyZW5jZXMgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoXHJcbiAgICAgIHJlcS51c2VyLl9pZCxcclxuICAgICAgeyBwcmVmZXJlbmNlczogcmVxLmJvZHkgfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHJ1blZhbGlkYXRvcnM6IHRydWUgfVxyXG4gICAgKS5zZWxlY3QoJy1wYXNzd29yZCcpO1xyXG5cclxuICAgIHJlcy5qc29uKHVzZXIpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBuZXh0KGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBAZGVzYyAgICBHZXQgc2F2ZWQgc2VhcmNoZXNcclxuLy8gQHJvdXRlICAgR0VUIC9hcGkvdXNlcnMvc2VhcmNoZXNcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZVxyXG5jb25zdCBnZXRTYXZlZFNlYXJjaGVzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLl9pZCkuc2VsZWN0KCdzYXZlZFNlYXJjaGVzJyk7XHJcbiAgICByZXMuanNvbih1c2VyLnNhdmVkU2VhcmNoZXMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBuZXh0KGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBAZGVzYyAgICBTYXZlIHNlYXJjaFxyXG4vLyBAcm91dGUgICBQT1NUIC9hcGkvdXNlcnMvc2VhcmNoZXNcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZVxyXG5jb25zdCBzYXZlU2VhcmNoID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgICByZXEudXNlci5faWQsXHJcbiAgICAgIHsgJHB1c2g6IHsgc2F2ZWRTZWFyY2hlczogcmVxLmJvZHkgfSB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSwgcnVuVmFsaWRhdG9yczogdHJ1ZSB9XHJcbiAgICApLnNlbGVjdCgnc2F2ZWRTZWFyY2hlcycpO1xyXG5cclxuICAgIHJlcy5qc29uKHVzZXIuc2F2ZWRTZWFyY2hlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEBkZXNjICAgIERlbGV0ZSBzYXZlZCBzZWFyY2hcclxuLy8gQHJvdXRlICAgREVMRVRFIC9hcGkvdXNlcnMvc2VhcmNoZXMvOmlkXHJcbi8vIEBhY2Nlc3MgIFByaXZhdGVcclxuY29uc3QgZGVsZXRlU2F2ZWRTZWFyY2ggPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoXHJcbiAgICAgIHJlcS51c2VyLl9pZCxcclxuICAgICAgeyAkcHVsbDogeyBzYXZlZFNlYXJjaGVzOiB7IF9pZDogcmVxLnBhcmFtcy5pZCB9IH0gfSxcclxuICAgICAgeyBuZXc6IHRydWUgfVxyXG4gICAgKS5zZWxlY3QoJ3NhdmVkU2VhcmNoZXMnKTtcclxuXHJcbiAgICByZXMuanNvbih1c2VyLnNhdmVkU2VhcmNoZXMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBuZXh0KGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBAZGVzYyAgICBHZXQgZmF2b3JpdGUgYXBhcnRtZW50c1xyXG4vLyBAcm91dGUgICBHRVQgL2FwaS91c2Vycy9mYXZvcml0ZXNcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZVxyXG5jb25zdCBnZXRGYXZvcml0ZUFwYXJ0bWVudHMgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuX2lkKS5wb3B1bGF0ZSh7XHJcbiAgICAgIHBhdGg6ICdhcGFydG1lbnROb3Rlcy5hcGFydG1lbnQnLFxyXG4gICAgICBzZWxlY3Q6ICd0aXRsZSBwcmljZSBsb2NhdGlvbiBiZWRyb29tcyBiYXRocm9vbXMgYXJlYSBhbWVuaXRpZXMgaW1hZ2VzJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5qc29uKHVzZXIuYXBhcnRtZW50Tm90ZXMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBuZXh0KGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBAZGVzYyAgICBHZXQgYXBhcnRtZW50IG5vdGVzXHJcbi8vIEByb3V0ZSAgIEdFVCAvYXBpL3VzZXJzL2FwYXJ0bWVudHMvOmlkL25vdGVzXHJcbi8vIEBhY2Nlc3MgIFByaXZhdGVcclxuY29uc3QgZ2V0QXBhcnRtZW50Tm90ZXMgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuX2lkKTtcclxuICAgIGNvbnN0IGFwYXJ0bWVudE5vdGVzID0gdXNlci5hcGFydG1lbnROb3Rlcy5maW5kKFxyXG4gICAgICAobm90ZSkgPT4gbm90ZS5hcGFydG1lbnQudG9TdHJpbmcoKSA9PT0gcmVxLnBhcmFtcy5pZFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIWFwYXJ0bWVudE5vdGVzKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbih7IG5vdGVzOiBbXSB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuanNvbihhcGFydG1lbnROb3Rlcy5ub3Rlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEBkZXNjICAgIEFkZCBhcGFydG1lbnQgbm90ZVxyXG4vLyBAcm91dGUgICBQT1NUIC9hcGkvdXNlcnMvYXBhcnRtZW50cy86aWQvbm90ZXNcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZVxyXG5jb25zdCBhZGRBcGFydG1lbnROb3RlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFwYXJ0bWVudCA9IGF3YWl0IEFwYXJ0bWVudC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghYXBhcnRtZW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnQXBhcnRtZW50IG5vdCBmb3VuZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuX2lkKTtcclxuICAgIGNvbnN0IGFwYXJ0bWVudE5vdGVzID0gdXNlci5hcGFydG1lbnROb3Rlcy5maW5kKFxyXG4gICAgICAobm90ZSkgPT4gbm90ZS5hcGFydG1lbnQudG9TdHJpbmcoKSA9PT0gcmVxLnBhcmFtcy5pZFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoYXBhcnRtZW50Tm90ZXMpIHtcclxuICAgICAgYXBhcnRtZW50Tm90ZXMubm90ZXMucHVzaCh7IGNvbnRlbnQ6IHJlcS5ib2R5LmNvbnRlbnQgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1c2VyLmFwYXJ0bWVudE5vdGVzLnB1c2goe1xyXG4gICAgICAgIGFwYXJ0bWVudDogcmVxLnBhcmFtcy5pZCxcclxuICAgICAgICBub3RlczogW3sgY29udGVudDogcmVxLmJvZHkuY29udGVudCB9XSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICByZXMuanNvbih1c2VyLmFwYXJ0bWVudE5vdGVzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbmV4dChlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQGRlc2MgICAgVXBkYXRlIGFwYXJ0bWVudCBub3RlXHJcbi8vIEByb3V0ZSAgIFBVVCAvYXBpL3VzZXJzL2FwYXJ0bWVudHMvOmlkL25vdGVzLzpub3RlSWRcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZVxyXG5jb25zdCB1cGRhdGVBcGFydG1lbnROb3RlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLl9pZCk7XHJcbiAgICBjb25zdCBhcGFydG1lbnROb3RlcyA9IHVzZXIuYXBhcnRtZW50Tm90ZXMuZmluZChcclxuICAgICAgKG5vdGUpID0+IG5vdGUuYXBhcnRtZW50LnRvU3RyaW5nKCkgPT09IHJlcS5wYXJhbXMuaWRcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFhcGFydG1lbnROb3Rlcykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwYXJ0bWVudCBub3RlcyBub3QgZm91bmQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5vdGUgPSBhcGFydG1lbnROb3Rlcy5ub3Rlcy5pZChyZXEucGFyYW1zLm5vdGVJZCk7XHJcbiAgICBpZiAoIW5vdGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3RlIG5vdCBmb3VuZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbm90ZS5jb250ZW50ID0gcmVxLmJvZHkuY29udGVudDtcclxuICAgIG5vdGUudXBkYXRlZEF0ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcclxuICAgIHJlcy5qc29uKGFwYXJ0bWVudE5vdGVzLm5vdGVzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbmV4dChlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQGRlc2MgICAgRGVsZXRlIGFwYXJ0bWVudCBub3RlXHJcbi8vIEByb3V0ZSAgIERFTEVURSAvYXBpL3VzZXJzL2FwYXJ0bWVudHMvOmlkL25vdGVzLzpub3RlSWRcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZVxyXG5jb25zdCBkZWxldGVBcGFydG1lbnROb3RlID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLl9pZCk7XHJcbiAgICBjb25zdCBhcGFydG1lbnROb3RlcyA9IHVzZXIuYXBhcnRtZW50Tm90ZXMuZmluZChcclxuICAgICAgKG5vdGUpID0+IG5vdGUuYXBhcnRtZW50LnRvU3RyaW5nKCkgPT09IHJlcS5wYXJhbXMuaWRcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFhcGFydG1lbnROb3Rlcykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwYXJ0bWVudCBub3RlcyBub3QgZm91bmQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFwYXJ0bWVudE5vdGVzLm5vdGVzID0gYXBhcnRtZW50Tm90ZXMubm90ZXMuZmlsdGVyKFxyXG4gICAgICAobm90ZSkgPT4gbm90ZS5faWQudG9TdHJpbmcoKSAhPT0gcmVxLnBhcmFtcy5ub3RlSWRcclxuICAgICk7XHJcblxyXG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICByZXMuanNvbihhcGFydG1lbnROb3Rlcy5ub3Rlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGdldFByb2ZpbGUsXHJcbiAgdXBkYXRlUHJvZmlsZSxcclxuICBkZWxldGVQcm9maWxlLFxyXG4gIHVwZGF0ZVByZWZlcmVuY2VzLFxyXG4gIGdldFNhdmVkU2VhcmNoZXMsXHJcbiAgc2F2ZVNlYXJjaCxcclxuICBkZWxldGVTYXZlZFNlYXJjaCxcclxuICBnZXRGYXZvcml0ZUFwYXJ0bWVudHMsXHJcbiAgZ2V0QXBhcnRtZW50Tm90ZXMsXHJcbiAgYWRkQXBhcnRtZW50Tm90ZSxcclxuICB1cGRhdGVBcGFydG1lbnROb3RlLFxyXG4gIGRlbGV0ZUFwYXJ0bWVudE5vdGUsXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDNUMsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsMkJBQTJCLENBQUM7O0FBRXREO0FBQ0E7QUFDQTtBQUNBLE1BQU1FLFVBQVUsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzNDLElBQUk7SUFDRixNQUFNQyxJQUFJ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