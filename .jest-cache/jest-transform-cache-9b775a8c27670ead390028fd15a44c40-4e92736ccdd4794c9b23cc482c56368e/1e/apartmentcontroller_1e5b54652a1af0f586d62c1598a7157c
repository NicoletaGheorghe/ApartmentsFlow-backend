ab83e094397cd0d5e56126af5131431b
const Apartment = require('../models/apartment.model');

// @desc    Get all apartments
// @route   GET /api/apartments
// @access  Public
const getApartments = async (req, res, next) => {
  try {
    // Build query
    const query = {};

    // Filter by price range
    if (req.query.minPrice || req.query.maxPrice) {
      query.price = {};
      if (req.query.minPrice) query.price.$gte = Number(req.query.minPrice);
      if (req.query.maxPrice) query.price.$lte = Number(req.query.maxPrice);
    }

    // Filter by bedrooms
    if (req.query.bedrooms) {
      query.bedrooms = Number(req.query.bedrooms);
    }

    // Filter by status
    if (req.query.status) {
      query.status = req.query.status;
    }

    // Search by location if coordinates provided
    if (req.query.lat && req.query.lng) {
      query.location = {
        $near: {
          $geometry: {
            type: 'Point',
            coordinates: [Number(req.query.lng), Number(req.query.lat)]
          },
          $maxDistance: req.query.radius ? Number(req.query.radius) * 1000 : 10000 // Default 10km
        }
      };
    }

    // Execute query with pagination
    const page = Number(req.query.page) || 1;
    const limit = Number(req.query.limit) || 10;
    const skip = (page - 1) * limit;
    const apartments = await Apartment.find(query).populate('owner', 'name email').skip(skip).limit(limit).sort({
      createdAt: -1
    });
    const total = await Apartment.countDocuments(query);
    res.json({
      apartments,
      page,
      pages: Math.ceil(total / limit),
      total
    });
  } catch (error) {
    next(error);
  }
};

// @desc    Get single apartment
// @route   GET /api/apartments/:id
// @access  Public
const getApartment = async (req, res, next) => {
  try {
    const apartment = await Apartment.findById(req.params.id).populate('owner', 'name email');
    if (!apartment) {
      return res.status(404).json({
        error: 'Apartment not found'
      });
    }
    res.json(apartment);
  } catch (error) {
    next(error);
  }
};

// @desc    Create apartment
// @route   POST /api/apartments
// @access  Private
const createApartment = async (req, res, next) => {
  try {
    const apartment = await Apartment.create({
      ...req.body,
      owner: req.user._id
    });
    res.status(201).json(apartment);
  } catch (error) {
    next(error);
  }
};

// @desc    Update apartment
// @route   PUT /api/apartments/:id
// @access  Private
const updateApartment = async (req, res, next) => {
  try {
    let apartment = await Apartment.findById(req.params.id);
    if (!apartment) {
      return res.status(404).json({
        error: 'Apartment not found'
      });
    }

    // Check ownership
    if (apartment.owner.toString() !== req.user._id.toString() && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Not authorized to update this apartment'
      });
    }
    apartment = await Apartment.findByIdAndUpdate(req.params.id, req.body, {
      new: true,
      runValidators: true
    });
    res.json(apartment);
  } catch (error) {
    next(error);
  }
};

// @desc    Delete apartment
// @route   DELETE /api/apartments/:id
// @access  Private
const deleteApartment = async (req, res, next) => {
  try {
    const apartment = await Apartment.findById(req.params.id);
    if (!apartment) {
      return res.status(404).json({
        error: 'Apartment not found'
      });
    }

    // Check ownership
    if (apartment.owner.toString() !== req.user._id.toString() && req.user.role !== 'admin') {
      return res.status(403).json({
        error: 'Not authorized to delete this apartment'
      });
    }
    await apartment.deleteOne();
    res.json({
      message: 'Apartment removed'
    });
  } catch (error) {
    next(error);
  }
};
module.exports = {
  getApartments,
  getApartment,
  createApartment,
  updateApartment,
  deleteApartment
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBcGFydG1lbnQiLCJyZXF1aXJlIiwiZ2V0QXBhcnRtZW50cyIsInJlcSIsInJlcyIsIm5leHQiLCJxdWVyeSIsIm1pblByaWNlIiwibWF4UHJpY2UiLCJwcmljZSIsIiRndGUiLCJOdW1iZXIiLCIkbHRlIiwiYmVkcm9vbXMiLCJzdGF0dXMiLCJsYXQiLCJsbmciLCJsb2NhdGlvbiIsIiRuZWFyIiwiJGdlb21ldHJ5IiwidHlwZSIsImNvb3JkaW5hdGVzIiwiJG1heERpc3RhbmNlIiwicmFkaXVzIiwicGFnZSIsImxpbWl0Iiwic2tpcCIsImFwYXJ0bWVudHMiLCJmaW5kIiwicG9wdWxhdGUiLCJzb3J0IiwiY3JlYXRlZEF0IiwidG90YWwiLCJjb3VudERvY3VtZW50cyIsImpzb24iLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwiZXJyb3IiLCJnZXRBcGFydG1lbnQiLCJhcGFydG1lbnQiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwiY3JlYXRlQXBhcnRtZW50IiwiY3JlYXRlIiwiYm9keSIsIm93bmVyIiwidXNlciIsIl9pZCIsInVwZGF0ZUFwYXJ0bWVudCIsInRvU3RyaW5nIiwicm9sZSIsImZpbmRCeUlkQW5kVXBkYXRlIiwibmV3IiwicnVuVmFsaWRhdG9ycyIsImRlbGV0ZUFwYXJ0bWVudCIsImRlbGV0ZU9uZSIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiYXBhcnRtZW50LmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQXBhcnRtZW50ID0gcmVxdWlyZSgnLi4vbW9kZWxzL2FwYXJ0bWVudC5tb2RlbCcpO1xyXG5cclxuLy8gQGRlc2MgICAgR2V0IGFsbCBhcGFydG1lbnRzXHJcbi8vIEByb3V0ZSAgIEdFVCAvYXBpL2FwYXJ0bWVudHNcclxuLy8gQGFjY2VzcyAgUHVibGljXHJcbmNvbnN0IGdldEFwYXJ0bWVudHMgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQnVpbGQgcXVlcnlcclxuICAgIGNvbnN0IHF1ZXJ5ID0ge307XHJcblxyXG4gICAgLy8gRmlsdGVyIGJ5IHByaWNlIHJhbmdlXHJcbiAgICBpZiAocmVxLnF1ZXJ5Lm1pblByaWNlIHx8IHJlcS5xdWVyeS5tYXhQcmljZSkge1xyXG4gICAgICBxdWVyeS5wcmljZSA9IHt9O1xyXG4gICAgICBpZiAocmVxLnF1ZXJ5Lm1pblByaWNlKSBxdWVyeS5wcmljZS4kZ3RlID0gTnVtYmVyKHJlcS5xdWVyeS5taW5QcmljZSk7XHJcbiAgICAgIGlmIChyZXEucXVlcnkubWF4UHJpY2UpIHF1ZXJ5LnByaWNlLiRsdGUgPSBOdW1iZXIocmVxLnF1ZXJ5Lm1heFByaWNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaWx0ZXIgYnkgYmVkcm9vbXNcclxuICAgIGlmIChyZXEucXVlcnkuYmVkcm9vbXMpIHtcclxuICAgICAgcXVlcnkuYmVkcm9vbXMgPSBOdW1iZXIocmVxLnF1ZXJ5LmJlZHJvb21zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaWx0ZXIgYnkgc3RhdHVzXHJcbiAgICBpZiAocmVxLnF1ZXJ5LnN0YXR1cykge1xyXG4gICAgICBxdWVyeS5zdGF0dXMgPSByZXEucXVlcnkuc3RhdHVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlYXJjaCBieSBsb2NhdGlvbiBpZiBjb29yZGluYXRlcyBwcm92aWRlZFxyXG4gICAgaWYgKHJlcS5xdWVyeS5sYXQgJiYgcmVxLnF1ZXJ5LmxuZykge1xyXG4gICAgICBxdWVyeS5sb2NhdGlvbiA9IHtcclxuICAgICAgICAkbmVhcjoge1xyXG4gICAgICAgICAgJGdlb21ldHJ5OiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbTnVtYmVyKHJlcS5xdWVyeS5sbmcpLCBOdW1iZXIocmVxLnF1ZXJ5LmxhdCldLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICRtYXhEaXN0YW5jZTogcmVxLnF1ZXJ5LnJhZGl1cyA/IE51bWJlcihyZXEucXVlcnkucmFkaXVzKSAqIDEwMDAgOiAxMDAwMCwgLy8gRGVmYXVsdCAxMGttXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFeGVjdXRlIHF1ZXJ5IHdpdGggcGFnaW5hdGlvblxyXG4gICAgY29uc3QgcGFnZSA9IE51bWJlcihyZXEucXVlcnkucGFnZSkgfHwgMTtcclxuICAgIGNvbnN0IGxpbWl0ID0gTnVtYmVyKHJlcS5xdWVyeS5saW1pdCkgfHwgMTA7XHJcbiAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xyXG5cclxuICAgIGNvbnN0IGFwYXJ0bWVudHMgPSBhd2FpdCBBcGFydG1lbnQuZmluZChxdWVyeSlcclxuICAgICAgLnBvcHVsYXRlKCdvd25lcicsICduYW1lIGVtYWlsJylcclxuICAgICAgLnNraXAoc2tpcClcclxuICAgICAgLmxpbWl0KGxpbWl0KVxyXG4gICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSk7XHJcblxyXG4gICAgY29uc3QgdG90YWwgPSBhd2FpdCBBcGFydG1lbnQuY291bnREb2N1bWVudHMocXVlcnkpO1xyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgYXBhcnRtZW50cyxcclxuICAgICAgcGFnZSxcclxuICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcclxuICAgICAgdG90YWwsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbmV4dChlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQGRlc2MgICAgR2V0IHNpbmdsZSBhcGFydG1lbnRcclxuLy8gQHJvdXRlICAgR0VUIC9hcGkvYXBhcnRtZW50cy86aWRcclxuLy8gQGFjY2VzcyAgUHVibGljXHJcbmNvbnN0IGdldEFwYXJ0bWVudCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBhcGFydG1lbnQgPSBhd2FpdCBBcGFydG1lbnQuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCkucG9wdWxhdGUoJ293bmVyJywgJ25hbWUgZW1haWwnKTtcclxuXHJcbiAgICBpZiAoIWFwYXJ0bWVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwYXJ0bWVudCBub3QgZm91bmQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKGFwYXJ0bWVudCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEBkZXNjICAgIENyZWF0ZSBhcGFydG1lbnRcclxuLy8gQHJvdXRlICAgUE9TVCAvYXBpL2FwYXJ0bWVudHNcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZVxyXG5jb25zdCBjcmVhdGVBcGFydG1lbnQgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYXBhcnRtZW50ID0gYXdhaXQgQXBhcnRtZW50LmNyZWF0ZSh7XHJcbiAgICAgIC4uLnJlcS5ib2R5LFxyXG4gICAgICBvd25lcjogcmVxLnVzZXIuX2lkLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oYXBhcnRtZW50KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbmV4dChlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQGRlc2MgICAgVXBkYXRlIGFwYXJ0bWVudFxyXG4vLyBAcm91dGUgICBQVVQgL2FwaS9hcGFydG1lbnRzLzppZFxyXG4vLyBAYWNjZXNzICBQcml2YXRlXHJcbmNvbnN0IHVwZGF0ZUFwYXJ0bWVudCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgYXBhcnRtZW50ID0gYXdhaXQgQXBhcnRtZW50LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG5cclxuICAgIGlmICghYXBhcnRtZW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnQXBhcnRtZW50IG5vdCBmb3VuZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgb3duZXJzaGlwXHJcbiAgICBpZiAoYXBhcnRtZW50Lm93bmVyLnRvU3RyaW5nKCkgIT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpICYmIHJlcS51c2VyLnJvbGUgIT09ICdhZG1pbicpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdOb3QgYXV0aG9yaXplZCB0byB1cGRhdGUgdGhpcyBhcGFydG1lbnQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFwYXJ0bWVudCA9IGF3YWl0IEFwYXJ0bWVudC5maW5kQnlJZEFuZFVwZGF0ZShyZXEucGFyYW1zLmlkLCByZXEuYm9keSwge1xyXG4gICAgICBuZXc6IHRydWUsXHJcbiAgICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuanNvbihhcGFydG1lbnQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBuZXh0KGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBAZGVzYyAgICBEZWxldGUgYXBhcnRtZW50XHJcbi8vIEByb3V0ZSAgIERFTEVURSAvYXBpL2FwYXJ0bWVudHMvOmlkXHJcbi8vIEBhY2Nlc3MgIFByaXZhdGVcclxuY29uc3QgZGVsZXRlQXBhcnRtZW50ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFwYXJ0bWVudCA9IGF3YWl0IEFwYXJ0bWVudC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuXHJcbiAgICBpZiAoIWFwYXJ0bWVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwYXJ0bWVudCBub3QgZm91bmQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIG93bmVyc2hpcFxyXG4gICAgaWYgKGFwYXJ0bWVudC5vd25lci50b1N0cmluZygpICE9PSByZXEudXNlci5faWQudG9TdHJpbmcoKSAmJiByZXEudXNlci5yb2xlICE9PSAnYWRtaW4nKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnTm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlIHRoaXMgYXBhcnRtZW50JyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBhcGFydG1lbnQuZGVsZXRlT25lKCk7XHJcblxyXG4gICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQXBhcnRtZW50IHJlbW92ZWQnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBuZXh0KGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBnZXRBcGFydG1lbnRzLFxyXG4gIGdldEFwYXJ0bWVudCxcclxuICBjcmVhdGVBcGFydG1lbnQsXHJcbiAgdXBkYXRlQXBhcnRtZW50LFxyXG4gIGRlbGV0ZUFwYXJ0bWVudCxcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxTQUFTLEdBQUdDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQzs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsYUFBYSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDOUMsSUFBSTtJQUNGO0lBQ0EsTUFBTUMsS0FBSyxHQUFHLENBQUMsQ0FBQzs7SUFFaEI7SUFDQSxJQUFJSCxHQUFHLENBQUNHLEtBQUssQ0FBQ0MsUUFBUSxJQUFJSixHQUFHLENBQUNHLEtBQUssQ0FBQ0UsUUFBUSxFQUFFO01BQzVDRixLQUFLLENBQUNHLEtBQUssR0FBRyxDQUFDLENBQUM7TUFDaEIsSUFBSU4sR0FBRyxDQUFDRyxLQUFLLENBQUNDLFFBQVEsRUFBRUQsS0FBSyxDQUFDRyxLQUFLLENBQUNDLElBQUks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