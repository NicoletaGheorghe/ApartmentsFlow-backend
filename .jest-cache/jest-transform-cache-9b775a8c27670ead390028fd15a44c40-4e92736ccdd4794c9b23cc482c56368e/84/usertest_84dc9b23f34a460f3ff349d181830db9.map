{"version":3,"names":["request","require","mongoose","app","User","jwt","describe","testUser","authToken","beforeEach","create","email","password","name","profileImage","sign","id","_id","process","env","JWT_SECRET","expiresIn","afterEach","deleteMany","it","response","get","set","expect","status","toBe","body","toHaveProperty","updateData","put","send","delete","deletedUser","findById","toBeNull"],"sources":["user.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst mongoose = require('mongoose');\r\nconst app = require('../app');\r\nconst User = require('../models/user.model');\r\nconst jwt = require('jsonwebtoken');\r\n\r\ndescribe('User Profile Management', () => {\r\n  let testUser;\r\n  let authToken;\r\n\r\n  beforeEach(async () => {\r\n    // Create a test user\r\n    testUser = await User.create({\r\n      email: 'test@example.com',\r\n      password: 'password123',\r\n      name: 'Test User',\r\n      profileImage: 'default-avatar.jpg',\r\n    });\r\n\r\n    // Generate auth token\r\n    authToken = jwt.sign({ id: testUser._id }, process.env.JWT_SECRET, {\r\n      expiresIn: '1d',\r\n    });\r\n  });\r\n\r\n  afterEach(async () => {\r\n    // Clean up test user\r\n    await User.deleteMany({});\r\n  });\r\n\r\n  describe('GET /api/users/profile', () => {\r\n    it('should get user profile when authenticated', async () => {\r\n      const response = await request(app)\r\n        .get('/api/users/profile')\r\n        .set('Authorization', `Bearer ${authToken}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('email', 'test@example.com');\r\n      expect(response.body).toHaveProperty('name', 'Test User');\r\n      expect(response.body).toHaveProperty('profileImage', 'default-avatar.jpg');\r\n    });\r\n\r\n    it('should not get user profile without authentication', async () => {\r\n      const response = await request(app).get('/api/users/profile');\r\n\r\n      expect(response.status).toBe(401);\r\n    });\r\n  });\r\n\r\n  describe('PUT /api/users/profile', () => {\r\n    it('should update user profile when authenticated', async () => {\r\n      const updateData = {\r\n        name: 'Updated Name',\r\n        profileImage: 'new-avatar.jpg',\r\n      };\r\n\r\n      const response = await request(app)\r\n        .put('/api/users/profile')\r\n        .set('Authorization', `Bearer ${authToken}`)\r\n        .send(updateData);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('name', 'Updated Name');\r\n      expect(response.body).toHaveProperty('profileImage', 'new-avatar.jpg');\r\n    });\r\n\r\n    it('should not update user profile without authentication', async () => {\r\n      const response = await request(app)\r\n        .put('/api/users/profile')\r\n        .send({ name: 'Should Not Update' });\r\n\r\n      expect(response.status).toBe(401);\r\n    });\r\n  });\r\n\r\n  describe('DELETE /api/users/profile', () => {\r\n    it('should delete user profile when authenticated', async () => {\r\n      const response = await request(app)\r\n        .delete('/api/users/profile')\r\n        .set('Authorization', `Bearer ${authToken}`);\r\n\r\n      expect(response.status).toBe(200);\r\n\r\n      // Verify user is deleted\r\n      const deletedUser = await User.findById(testUser._id);\r\n      expect(deletedUser).toBeNull();\r\n    });\r\n\r\n    it('should not delete user profile without authentication', async () => {\r\n      const response = await request(app).delete('/api/users/profile');\r\n\r\n      expect(response.status).toBe(401);\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}